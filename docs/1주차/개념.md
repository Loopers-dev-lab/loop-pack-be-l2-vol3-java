# 1주차: TDD 개념

## TDD란?

- **Test Driven Development**: 테스트 주도 개발
- TEST 코드를 먼저 작성하고 테스트 코드가 통과되도록 실제 비즈니스 로직을 작성하는 것
- 보통 TLD(Test Last Development)로 개발을 많이 한다

---

## TDD의 3단계 사이클

| 단계 | 설명 |
|------|------|
| **Red (Fail)** | 구현하려는 기능에 대한 실패하는 코드를 먼저 작성 (기능 조차도 없는 단계) |
| **Green (Pass)** | 테스트를 통과할 수 있을 정도의 최소한의 기능을 구현 |
| **Refactor (Clean)** | 테스트 통과를 유지하면서 코드의 중복을 개선하고 가독성을 높이는 등 코드를 개선 |

---

## TDD의 장점

- **높은 코드 품질:** 코드가 의도한 대로 작동하는지 즉각 확인이 가능하며, 결함(Bug)이 줄어듭니다.
- **자신감 있는 리팩토링:** 테스트 코드가 안전망 역할을 해주므로, 기존 기능을 망가뜨릴 걱정 없이 코드를 수정할 수 있습니다.
- **깔끔한 설계:** 테스트를 먼저 생각하다 보면 자연스럽게 모듈화가 잘 된, 간결한 설계를 고민하게 됩니다.
- **문서화 역할:** 테스트 코드 자체가 해당 기능이 어떻게 작동해야 하는지 보여주는 훌륭한 명세서가 됩니다.

---

## 테스트 종류

### 1. 단위 테스트 (Unit Test)

- **대상:** 함수, 메서드, 클래스 등 아주 작은 코드 단위
- **특징:** 외부 데이터베이스나 네트워크 연결 없이 독립적으로 실행됩니다
- **장점:** 실행 속도가 매우 빠르고(몇 밀리초 ms 단위), 문제가 어디서 발생했는지 정확히 알 수 있습니다
- **Java 도구:** JUnit, AssertJ, Mockito

### 2. 통합 테스트 (Integration Test)

- **대상:** 여러 모듈이나 컴포넌트가 결합했을 때의 상호작용
- **특징:** 실제 DB에 연결하거나 API를 호출하여 모듈 간의 연결에 문제가 없는지 확인합니다
- **장점:** 단위 테스트만으로는 발견하기 어려운 시스템 간의 정합성 문제를 찾습니다
- **Java 도구:** Spring Boot Test, Testcontainers

### 3. E2E 테스트 (End-to-End Test)

- **대상:** 사용자 관점에서의 전체 시나리오 (로그인부터 주문 완료까지 등)
- **특징:** 실제 브라우저를 띄우거나 앱을 실행하여 시스템 전체가 의도대로 동작하는지 검증합니다
- **장점:** 사용자가 실제로 겪을 수 있는 오류를 사전에 방지합니다
- **도구:** Selenium, Cypress, Playwright

---

## 테스트 작성 전략

- **안에서 밖으로 (Inside-Out):** 의존성 없는 것 → 의존성 있는 것 순서로 개발
- **밖에서 안으로 (Outside-In):** 사용자 인터페이스부터 시작하여 내부로 진행

---

## 개발 단계

### 1단계: 요구사항을 테스트 목록으로 분해

- 요구사항 문서나 기획서를 분석하여 **검증해야 할 항목**을 나열
- 각 항목은 **하나의 테스트 케이스**가 될 수 있도록 작게 분리
- 예시: "비밀번호는 8~16자" → "8자 미만이면 실패", "16자 초과하면 실패"

### 2단계: 테스트 작성 (Red)

- 아직 구현되지 않은 기능에 대한 테스트 코드 작성
- 테스트 실행 시 **반드시 실패**해야 함 (빨간불)
- Given-When-Then 패턴으로 작성

```java
@Test
void 비밀번호가_8자_미만이면_실패한다() {
    // given
    String password = "Short1!";

    // when & then
    assertThatThrownBy(() -> PasswordValidator.validate(password))
        .isInstanceOf(IllegalArgumentException.class);
}
```

### 3단계: 최소 구현 (Green)

- 테스트를 통과하는 **가장 간단한 코드** 작성
- 완벽한 코드가 아니어도 됨, 일단 통과만 시키기
- 하드코딩도 허용 (나중에 리팩토링)

```java
public class PasswordValidator {
    public static void validate(String password) {
        if (password.length() < 8) {
            throw new IllegalArgumentException("비밀번호는 8자 이상이어야 합니다.");
        }
    }
}
```

### 4단계: 리팩토링 (Refactor)

- 테스트가 통과하는 상태를 유지하면서 코드 개선
- 중복 제거, 네이밍 개선, 구조 정리
- 매직 넘버를 상수로 추출

```java
public class PasswordValidator {
    private static final int MIN_LENGTH = 8;
    private static final int MAX_LENGTH = 16;

    public static void validate(String password) {
        if (password.length() < MIN_LENGTH) {
            throw new IllegalArgumentException("비밀번호는 " + MIN_LENGTH + "자 이상이어야 합니다.");
        }
    }
}
```

### 5단계: 반복

- 다음 테스트 케이스로 이동
- Red → Green → Refactor 사이클 반복
- 모든 요구사항이 구현될 때까지 진행
