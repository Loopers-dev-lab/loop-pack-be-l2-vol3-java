# 실습: 회원가입 기능

## 요구사항

- 필요 정보: 로그인 ID, 비밀번호, 이름, 생년월일, 이메일
- 이미 가입된 로그인 ID로는 가입이 불가능함
- 각 정보는 포맷에 맞는 검증 필요 (이름, 이메일, 생년월일)
- 비밀번호는 암호화해 저장
- 비밀번호는 다음과 같은 규칙을 가짐
  1. 8~16자의 영문 대소문자, 숫자, 특수문자만 가능합니다.
  2. 생년월일은 비밀번호 내에 포함될 수 없습니다.

---

## 입력 정보

| 필드 | 검증 규칙 |
|------|-----------|
| 로그인 ID | 중복 불가 |
| 비밀번호 | 8~16자, 영문 대소문자/숫자/특수문자만, 생년월일 포함 불가 |
| 이름 | 비어있으면 안됨 |
| 생년월일 | yyyyMMdd 형식 |
| 이메일 | 이메일 형식 |

---

## TDD 진행 순서 (Inside-Out)
- Inside-Out 방식이 TDD를 처음 제안한 Kent Beck의 접근에 가깝다고함. 가장 작은 단위부터 테스트를 작성하 점차 바깥 레이어로 조합해나가는

### 1단계: PasswordValidator (의존성 없음)

- [x] 유효한 비밀번호는 통과한다
- [x] 8자 미만이면 실패
- [x] 16자 초과하면 실패
- [x] 영문 대소문자, 숫자, 특수문자 외 문자 시 실패 (한글, 공백)
- [x] 생년월일 포함 시 실패

### 2단계: 입력값 유효성 검증

- [x] 필수값 누락 시 실패 (로그인ID, 비밀번호, 이름, 생년월일, 이메일)
- [x] 이름이 비어있으면 실패
- [x] 이메일 형식 불일치 시 실패
- [x] 생년월일 형식(yyyyMMdd) 불일치 시 실패

### 3단계: 회원가입 서비스

- [ ] 정상 입력 시 회원가입 성공
- [ ] 중복 로그인 ID 시 예외 발생
- [ ] 비밀번호 암호화 저장
- [ ] 입력값 검증 실패 시 예외 발생

---

## TO BE
- 회원가입 기능에 대한 요구사항을 layer 별로 나누고 테스트 목록을 추찰하자.

### 1단계
요구사항 중 User가 해야하는 일을 추출한다.

- User 생성 시 필수 정보 체크
- 입력된 정보 검증(이름, 이메일, 생년월일)
- 비밀번호 규칙 검증

### 2단계
요구사항 중 Service가 해야할 일을 추출한다.
- 정상 입력 시 회원가입 성공
- 이미 가입된 로그인 ID로는 가입이 불가능
- 비밀번호가 암호화되어 저장

### 3단계
요구사항 중 Controller/DTO가 해야할 일을 추출한다.
- 필수값 누락 시 실패
- 이메일 형식 불일치시 실패
- 생년월일 형식 불일치시 실패


