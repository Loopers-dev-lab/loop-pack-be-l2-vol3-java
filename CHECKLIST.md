# 최종 체크리스트 및 게이트형 채점 기준 (v2)

## 1. 평가 철학

- 평가는 게이트형으로만 수행한다: `충족(1)` 또는 `미충족(0)`.
- 부분충족(0.5)은 허용하지 않는다.
- 체크리스트 한 줄이 복합 조건이면 모두 만족해야 `1`.
- 구현이 없거나 반대 동작이거나 증거가 부족하면 `0`.
- 목적은 "원하는 결과가 정확히 완성되었는지" 판정하는 것이다.

## 2. 점수 구조

- 평가 단위: 체크박스 `45개`.
- 항목당 점수: `100 / 45 = 2.222...점`.
- 섹션별 배점:
    - 공통(3개): `6.67점`
    - 회원가입(14개): `31.11점`
    - 내 정보 조회(7개): `15.56점`
    - 비밀번호 수정(7개): `15.56점`
    - 테스트(14개): `31.11점`

## 3. 점수 계산 및 게이트 판정

- `finalScore = (통과 항목 수 / 45) * 100`
- 최종 제시 점수는 마지막에 반올림한다.
- 게이트 결과:
    - `PASS`: `45/45` 전부 통과
    - `FAIL`: 하나라도 미통과

## 4. 증거 채택 규칙

- 구현 증거 우선: `Controller -> Service/Facade -> Domain -> Repository/Entity` 실행 경로를 본다.
- 테스트는 기능 섹션에서 보조 증거로만 사용한다.
- 테스트 섹션은 테스트 코드 자체를 독립적으로 채점한다.
- 문구/주석/테스트 이름만으로는 충족 인정하지 않는다.
- API 계약(요청/헤더/응답 필드명/에러 구조)이 요구와 다르면 미충족이다.
- 에러 처리는 상태코드와 응답 스키마가 일관되어야 충족이다.

## 5. 항목 판정 규칙

- 각 항목은 아래 체크박스 그대로 `1/0`으로 판정한다.
- 한 항목 안에 "A + B + C"가 있으면 A/B/C 모두 필요하다.
- "존재" 요구는 누락 시 반드시 실패해야 충족이다.
- "금지" 요구는 금지 입력이 실제로 차단되어야 충족이다.
- "포함 금지" 요구는 응답/저장소/로그 등 노출 경로 전반에서 없어야 충족이다.

## 6. 게이트 체크리스트 (총 45개)

### 6.1 공통 (C1-C3)

- [ ] `C1` loginId, name, email은 `trim()` 후 빈 값이면 실패 처리
- [ ] `C2` password는 `trim()`하지 않고, 공백/개행/제어문자 포함 시 실패 처리
- [ ] `C3` 필수 필드 누락/형식 오류에 대해 일관된 에러 응답

### 6.2 회원가입 (S1-S14)

- [ ] `S1` 요청 바디에 `loginId`, `password`, `name`, `birthDate`, `email` 존재
- [ ] `S2` loginId는 `trim()+소문자 정규화` 후 영문/숫자만 허용
- [ ] `S3` loginId 길이 `4~20` 검증
- [ ] `S4` loginId 중복 불가(정규화 기준)
- [ ] `S5` name은 한글/영문/공백만 허용, 길이 `1~50`
- [ ] `S6` birthDate는 `yyyy-MM-dd` 파싱 가능, 미래 날짜 금지
- [ ] `S7` email 길이 `<= 254`, 기본 이메일 형식 검증
- [ ] `S8` email 공백/제어문자 포함 시 실패
- [ ] `S9` password 길이 `8~16` 검증
- [ ] `S10` password 허용 문자: 영문 대/소문자, 숫자, ASCII 특수문자만
- [ ] `S11` password 공백/개행 포함 시 실패
- [ ] `S12` password에 생년월일 포함 금지(`YYYYMMDD`, `YYYY-MM-DD` 모두 검사)
- [ ] `S13` 비밀번호 해시 저장
- [ ] `S14` 응답에 비밀번호/해시 포함 금지

### 6.3 내 정보 조회 (M1-M7)

- [ ] `M1` 요청 헤더 `X-Loopers-LoginId`, `X-Loopers-LoginPw` 존재
- [ ] `M2` 헤더 값 `null/blank` 검사
- [ ] `M3` loginId는 `trim()+소문자 정규화` 후 조회
- [ ] `M4` 헤더 비밀번호와 해시 비교로 인증
- [ ] `M5` 반환 필드는 `loginId`, `name`, `birthDate`, `email`만 포함
- [ ] `M6` 이름 마스킹: 마지막 글자 `*`
- [ ] `M7` 1글자 이름은 `*`로 반환

### 6.4 비밀번호 수정 (P1-P7)

- [ ] `P1` 헤더 인증 선행 (`X-Loopers-LoginId`, `X-Loopers-LoginPw`)
- [ ] `P2` 요청 바디에 `currentPassword`, `newPassword` 존재
- [ ] `P3` currentPassword가 현재 비밀번호와 일치
- [ ] `P4` newPassword가 현재 비밀번호와 동일하면 실패
- [ ] `P5` newPassword는 회원가입과 동일한 비밀번호 규칙 적용
- [ ] `P6` 새 비밀번호 해시 저장
- [ ] `P7` 응답에 비밀번호/해시 포함 금지

### 6.5 테스트 (T1-T14)

#### 단위 테스트 (T1-T7)

- [ ] `T1` loginId 정규화 및 형식/길이 검증
- [ ] `T2` name 허용 문자/길이 검증
- [ ] `T3` birthDate 포맷/미래 날짜 금지
- [ ] `T4` email 형식/길이/공백·제어문자 실패
- [ ] `T5` password 길이/허용 문자/공백 금지
- [ ] `T6` 생년월일 포함 금지(`YYYYMMDD`, `YYYY-MM-DD`)
- [ ] `T7` 이름 마스킹(1글자/다글자)

#### 통합 테스트 (T8-T11)

- [ ] `T8` 회원가입 성공 및 해시 저장 확인
- [ ] `T9` loginId 중복 실패
- [ ] `T10` 내 정보 조회 성공/인증 실패
- [ ] `T11` 비밀번호 변경 성공/실패(불일치/동일/규칙 위반)

#### E2E 테스트 (T12-T14)

- [ ] `T12` 회원가입 정상/실패
- [ ] `T13` 내 정보 조회 정상/실패
- [ ] `T14` 비밀번호 변경 정상/실패

## 7. 테스트 섹션 운영 규칙

- 테스트가 존재해도 핵심 검증 포인트가 빠지면 미충족이다.
- 성공 케이스만 있고 요구된 실패 케이스가 없으면 미충족이다.
- 가능하면 테스트 실행 결과로 검증한다.
- 테스트 이름이 아니라 assert 내용과 검증 범위를 기준으로 판정한다.

## 8. 리포트 작성 형식 (평가 시)

- 항목별로 `ID / 결과(1|0) / 근거 파일:라인 / 판정 사유`를 기록한다.
- 섹션 합계와 총점을 함께 제시한다.
- 마지막에 게이트 결과를 `PASS` 또는 `FAIL`로 명시한다.
